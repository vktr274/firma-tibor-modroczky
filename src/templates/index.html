{% extends "layout.html" %}

{% block head_extra %}
<meta name="google-site-verification" content="{{google_site_verification}}" />

{% assets "index_css" %}
<link rel="preload stylesheet" href="{{ ASSET_URL }}" as="style" crossorigin="anonymous">
{% endassets %}

{% endblock %}

{% block header_extra %}
<ul id="slide-out" class="sidenav sidenav-fixed">
    {% for key, value in actions.items() %}
    <li>
        <a href="#{{ value.anchor }}" class="sidenav-close">
            <i class="material-icons">{{ value.icon }}</i>
            {{ value.short_name }}
        </a>
    </li>
    {% endfor %}
    <li><div class="divider"></div></li>
    <li>
        <a href="#kontakt" class="sidenav-close">
            <i class="material-icons">contact_page</i>
            Kontakt
        </a>
    </li>
    <li>
        <a
            href="https://forms.gle/KthsowBGahU9bZCJ8"
            target="_blank"
            rel="noopener noreferrer"
            class="modal-trigger"
        >
            <i class="material-icons">sticky_note_2</i>
            Spätná väzba k stránke
        </a>
    </li>
</ul>
{% endblock %}

{% block main %}
<main>
    <div id="uvod" style="position: relative; text-align: center;">
        <picture>
            <source
                type="image/webp"
                srcset="{{ url_for('static', filename='images/top.webp') }}"
            />
            <img 
                src="{{ url_for('static', filename='images/top.jpg') }}"
                style="height: 100%; width: 100%; object-fit: cover;"
                alt="Plošný spoj"
            />
        </picture>
        <div class="top-container">
            <h1>
                <picture>
                    <source
                        type="image/webp"
                        srcset="{{ url_for('static', filename='images/logo_center.webp') }}"
                    />
                    <img
                        class="intro-logo"
                        src="{{ url_for('static', filename='images/logo_center.png') }}"
                        alt="Firma Tibor Modroczky - Servis výpočtovej techniky a spotrebnej elektroniky"
                    />
                </picture>
            </h1>
            <div id="p-container">
                {% for item in intro %}
                <p class="white-text responsive-top-text">
                    {{ item }}
                </p>
                {% endfor %}
            </div>
        </div>
        <a href="#oprava-spotrebnej-elektroniky" class="top-icon-container">
            <div id="details">
                <span class="white-text" style="display: block;">Podrobnosti</span>
                <i class="white-text material-icons responsive-top-icon">expand_more</i>
            </div>
        </a>
    </div>
    {% for key, value in actions.items() %}
    <div id="{{ value.anchor }}">
        <div class="parallax-container">
            <!-- Desktop only -->
            <div class="parallax hide-on-med-and-down">
                <picture>
                    <source
                        type="image/webp"
                        srcset="{{ url_for('static', filename='images/'+value['image']) }}"
                    />
                    <img
                        src="{{ url_for('static', filename='images/'+value['image_fallback']) }}"
                        alt="{{value.short_name}}"
                    >
                </picture>
            </div>
            <!-- Tablet and Mobile -->
            <div class="parallax hide-on-large-only">
                <picture>
                    <source
                        type="image/webp"
                        srcset="{{ url_for('static', filename='images/'+value['image']) }}"
                    />
                    <img
                        src="{{ url_for('static', filename='images/'+value['image_fallback']) }}"
                        alt="{{value.short_name}}"
                        class="static-parallax"
                    >
                </picture>
            </div>
            <!-- end -->
        </div>
        <div class="section white z-depth-5">
            <div class="row container">
                <h2 class="header responsive-h2">{{ key }}</h2>
                <p class="grey-text text-darken-3 lighten-3">
                    <ul>
                        {% for item in value['items'] %}
                        <li>
                            <picture>
                                <source
                                    type="image/webp"
                                    srcset="{{ url_for('static', filename='images/circle.webp') }}"
                                />
                                <img
                                    class="responsive-marker"
                                    src="{{ url_for('static', filename='images/circle.png') }}"
                                    alt="marker"
                                />
                            </picture>
                            <span class="action-item">{{ item }}</span>
                        </li>
                        {% endfor %}
                    </ul>
                </p>
            </div>
        </div>
    </div>
    {% endfor %}

    <!-- Mobile and Tablet action buttons -->
    <div class="hide-on-large-only">
        <div
            id="fab-mobile-tablet"
            class="fixed-action-btn"
            style="display:none; bottom: 88px; right: 28px;"
        >
            <a 
                href="{{ go_to }}"
                class="btn-floating btn-small grey darken-1"
            >
                <i class="material-icons">arrow_upward</i>
            </a>
        </div>
        <div
            class="fixed-action-btn"
            style="bottom: 16px; right: 16px;"
        >
            <a 
                href="#kontakt"
                class="btn-floating btn-large blue darken-2"
            >
                <i class="material-icons">perm_phone_msg</i>
            </a>
        </div>
    </div>
    <!-- Desktop action button -->
    <div
        id="fab-desktop"
        class="fixed-action-btn hide-on-med-and-down"
        style="display:none;"
    >
        <a 
            href="{{ go_to }}"
            class="btn-floating btn-large blue darken-2 tooltipped"
            data-position="left"
            data-tooltip="Prejsť na začiatok"
        >
            <i class="material-icons">arrow_upward</i>
        </a>
    </div>
    <!-- end -->
</main>
{% endblock %}

{% block footer %}
<footer class="page-footer grey darken-2">
    <div class="container">
        <div class="col s12">
            <div id="kontakt" class="card {{ 'hoverable' if not request.MOBILE }}">
                <div class="card-content black-text">
                    <div style="position: relative;">
                        <div id="loading-map" class="loading">
                            <div class="preloader-wrapper small active">
                                <div class="spinner-layer spinner-blue-only">
                                    <div class="circle-clipper left">
                                        <div class="circle"></div>
                                    </div><div class="gap-patch">
                                        <div class="circle"></div>
                                    </div><div class="circle-clipper right">
                                        <div class="circle"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="map"></div>
                    </div>
                    <span class="card-title" style="padding-top: 8px; padding-bottom: 8px;">Kontaktné informácie</span>
                    <!-- Desktop and Tablet contact -->
                    <div class="row valign-wrapper hide-on-small-only">
                        <div class="col s6">
                            <div class="container center-align">
                                <i class="material-icons">pin_drop</i>
                                <div>
                                    <p>Firma Tibor Modroczky</p>
                                    <p>Diakovská 712</p>
                                    <p>925 01 Matúškovo</p>
                                </div>
                            </div>
                        </div>
                        <div class="col s6">
                            <div class="container center-align">
                                <p class="valign-wrapper">
                                    <i class="material-icons">email</i>
                                    <a
                                        href="mailto:modroczkyt@gmail.com"
                                        class="contact-padding {{ 'tooltipped' if not request.MOBILE }}"
                                        data-position="right"
                                        data-tooltip="Poslať e-mail"
                                    >
                                        modroczkyt@gmail.com
                                    </a>
                                </p>
                                <p class="valign-wrapper">
                                    <i class="material-icons">call</i>
                                    <a 
                                        href="tel:0317826228"
                                        class="contact-padding {{ 'tooltipped' if not request.MOBILE }}"
                                        data-position="right"
                                        data-tooltip="Zavolať na telefón"
                                    >
                                        031 782 6228
                                    </a>
                                </p>
                                <p class="valign-wrapper">
                                    <i class="material-icons">smartphone</i>
                                    <a 
                                        href="tel:+421905460506"
                                        class="contact-padding {{ 'tooltipped' if not request.MOBILE }}"
                                        data-position="right"
                                        data-tooltip="Zavolať na mobil"
                                    >
                                        0905 460 506
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                    <!--  Mobile contact -->
                    <div class="container hide-on-med-and-up">
                        <div style="padding-bottom: 8px;">
                            <p>Firma Tibor Modroczky</p>
                            <p>Diakovská 712</p>
                            <p>925 01 Matúškovo</p>
                        </div>
                        <p class="valign-wrapper">
                            <i class="material-icons">email</i>
                            <a
                                href="mailto:modroczkyt@gmail.com"
                                class="contact-padding"
                            >
                                modroczkyt@gmail.com
                            </a>
                        </p>
                        <p class="valign-wrapper">
                            <i class="material-icons">call</i>
                            <a 
                                href="tel:0317826228"
                                class="contact-padding"
                            >
                                031 782 6228
                            </a>
                        </p>
                        <p class="valign-wrapper">
                            <i class="material-icons">smartphone</i>
                            <a 
                                href="tel:+421905460506"
                                class="contact-padding"
                            >
                                0905 460 506
                            </a>
                        </p>
                    </div>
                    <!-- end -->
                </div>
                <div class="card-action">
                    <a 
                        href="https://www.google.com/maps/search/?api=1&query=48.16455,17.74351"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="blue-text text-darken-2"
                    >
                        Otvoriť v Google Maps
                    </a>
                </div>
            </div>
        </div>
        <div class="row">
            
            <a
                href="http://www.klamont.sk/"
                target="_blank"
                rel="noopener noreferrer"
            >
                <picture>
                    <source
                        type="image/webp"
                        srcset="{{ url_for('static', filename='images/klamont_logo.webp') }}"
                    />
                    <img
                        style="height: 48px; width: auto;"
                        src="{{ url_for('static', filename='images/klamont_logo.png') }}"
                        alt="Klamont Logo"
                    />
                </picture>
            </a>
            <blockquote style="border-left: 5px solid #757575;">
                All photographs on this site are used for illustration purposes only and
                their contents do not endorse any activities provided by Firma Tibor Modroczky.
                The photographs are licensed under the
                <a
                    href="https://www.pexels.com/license/" 
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    <span style="font-weight: bold;">Pexels License</span>
                </a> or
                <a
                    href="https://creativecommons.org/publicdomain/zero/1.0/"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    <span style="font-weight: bold;">CC0 License</span>
                </a>
                and do not require attribution.
            </blockquote>
        </div>
    </div>
    <div class="footer-copyright grey darken-3">
        <div class="container center-align">
            <!-- Desktop only -->
            <span
                class="left hide-on-med-and-down"
            >
                © 2022 Viktor Modroczký
            </span>
            <!-- Mobile and Tablet -->
            <p
                class="hide-on-large-only"
                style="margin: 0; padding: 0;"
            >
                © 2022 Viktor Modroczký
            </p>
            <!-- end -->
            <!-- Desktop only -->
            <span 
                class="right hide-on-med-and-down"
            >
                Made with
                <a
                    href="https://palletsprojects.com/p/flask/"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    <span style="font-weight: bold;">Flask</span>
                </a>
                and
                <a
                    href="https://materializecss.github.io/"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    <span style="font-weight: bold;">Materialize</span>
                </a>
            </span>
            <!-- Mobile and Tablet -->
            <p 
                class="hide-on-large-only"
                style="margin: 0; padding: 0;"
            >
                Made with
                <a
                    href="https://palletsprojects.com/p/flask/"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    <span style="font-weight: bold;">Flask</span>
                </a>
                and
                <a
                    href="https://materializecss.github.io/"
                    target="_blank"
                    rel="noopener noreferrer"
                >
                    <span style="font-weight: bold;">Materialize</span>
                </a>
            </p>
            <!-- end -->
        </div>
    </div>
</footer>
{% endblock %}

{% block extra_styles %}
<style>
    header, main, footer {
        padding-left: 300px;
    }
    nav {
        width: calc(100% - 300px);
    }
    #nav-normal {
        display: none;
    }
    #nav-transparent {
        display: block !important;
    }
    img.responsive-marker {
        height: 10px;
        width: 10px;
    }
    span.action-item {
        padding-left: 8px; 
        font-size: 115%;
    }
    p.responsive-top-text {
        overflow-wrap: break-word;
        font-weight: lighter;
        font-size: 200%;
    }
    div.top-container {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
    i.responsive-top-icon {
        font-size: 32px;
    }
    a.top-icon-container {
        position: absolute;
        bottom: 2%;
        left: 50%;
        transform: translate(-50%,-2%);
    }
    img.intro-logo {
        width: 520px;
        height: auto;
    }
    a.contact-padding {
        padding: 8px;
    }
    #map {
        height: 256px;
        width: 100%;
        z-index: 1;
    }
    div.loading {
        position: absolute;
        top: 50%; 
        left: 50%;
        transform: translate(-50%, -50%);
    }
    h2.responsive-h2 {
        font-weight: lighter;
        font-size: 340%;
        margin-top: 20px;
    }
    .leaflet-tooltip {
        background-color: #323232;
        color: white;
        border: 1px solid #323232;
    }
    .leaflet-tooltip-top::before {
        border-top-color: #323232;
    }
    .leaflet-popup-content-wrapper, .leaflet-popup-tip {
        background-color: #323232
    }
    .leaflet-popup-content {
        color: white;
    }
    .leaflet-popup-close-button span {
        color: white;
    }
    @media only screen and (max-width : 992px) {
        header, main, footer {
            padding-left: 0;
        }
        nav {
            width: 100%;
        }
        img.responsive-marker {
            height: 8px;
            width: 8px;
        }
        span.action-item {
            padding-left: 8px; 
            font-size: 110%;
        }
        .parallax-container {
            height: 300px;
        }
        img.static-parallax {
            height: 300px;
            width: 100%;
            object-fit: cover;
        }
        p.responsive-top-text {
            font-size: 175%;
        }
        i.responsive-top-icon {
            font-size: 24px;
        }
        img.intro-logo {
            width: 420px;
        }
        h2.responsive-h2 {
            font-size: 300%;
            margin-top: 18px;
        }
    }
    @media only screen and (max-width : 600px) {
        p.responsive-top-text {
            font-size: 140%;
        }
        img.intro-logo {
            width: 320px;
        }
        h2.responsive-h2 {
            font-size: 230%;
            margin-top: 16px;
        }
    }
    @media only screen and (max-width : 400px) {
        p.responsive-top-text {
            font-size: 120%;
        }
        img.intro-logo {
            width: 220px;
        }
        h2.responsive-h2 {
            font-size: 200%;
            margin-top: 14px;
        }
    }
</style>
{% endblock %}

{% block extra_scripts %}
{% assets "index_js" %}
<script type="text/javascript" src="{{ ASSET_URL }}" crossorigin="anonymous"></script>
{% endassets %}
<script>
    function bounce() {
        $('#details').effect('bounce', { times: 2, duration: 750, complete: bounce }).delay(5000);
    };

    var controller = new ScrollMagic.Controller();
    
    var introScene = new ScrollMagic.Scene({
        duration: '100%',
        triggerElement: '#uvod'
    });
    var repairElectronicsScene = new ScrollMagic.Scene({
        duration: '100%',
        triggerElement: '#oprava-spotrebnej-elektroniky'
    });
    var repairLaptopsScene = new ScrollMagic.Scene({
        duration: '100%',
        triggerElement: '#oprava-notebookov'
    });
    var repairComputersScene = new ScrollMagic.Scene({
        duration: '100%',
        triggerElement: '#oprava-pocitacov'
    });
    var softwareScene = new ScrollMagic.Scene({
        duration: '100%',
        triggerElement: '#instalacia-softveru'
    });
    var programmingScene = new ScrollMagic.Scene({
        duration: '100%',
        triggerElement: '#programovanie-obvodov'
    });
    var sellScene = new ScrollMagic.Scene({
        duration: '100%',
        triggerElement: '#predaj'
    });
    var contactScene = new ScrollMagic.Scene({
        duration: '100%',
        triggerElement: '#kontakt'
    });

    introScene.on("enter", (event) => history.replaceState(null, null, '#uvod'));
    repairElectronicsScene.on("enter", (event) => history.replaceState(null, null, '#oprava-spotrebnej-elektroniky'));
    repairLaptopsScene.on("enter", (event) => history.replaceState(null, null, '#oprava-notebookov'));
    repairComputersScene.on("enter", (event) => history.replaceState(null, null, '#oprava-pocitacov'));
    softwareScene.on("enter", (event) => history.replaceState(null, null, '#instalacia-softveru'));
    programmingScene.on("enter", (event) => history.replaceState(null, null, '#programovanie-obvodov'));
    sellScene.on("enter", (event) => history.replaceState(null, null, '#predaj'));
    contactScene.on("enter", (event) => history.replaceState(null, null, '#kontakt'));

    $(document).ready(() => {
        $('#uvod').css({
            'height': $(window).outerHeight(),
            'min-height':
                $('#nav-normal').height() + $('.top-container').height() +
                $('#details').height()
        });
        $('#p-container').css('padding-bottom', $('#details').height());
        $('.sidenav').sidenav();
        $('.fixed-action-btn').floatingActionButton();
        $('.parallax').parallax();
        
        bounce();

        controller.addScene([
            introScene,
            repairElectronicsScene,
            repairLaptopsScene,
            repairComputersScene,
            softwareScene,
            programmingScene,
            sellScene,
            contactScene
        ]);

        var geo = [48.16455, 17.74351];
        var map = L.map('map', {
            center: geo,
            zoom: 9,
            fullscreenControl: true,
            fullscreenControlOptions: {
                position: 'topleft'
            }
        });
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        }).addTo(map);
        var icon = L.icon({
            iconUrl: '../static/images/pin.png',
            iconSize: [64, 64],
            iconAnchor: [32, 64],
            popupAnchor: [0, -64],
            tooltipAnchor: [0, -68]
        });
        var tooltipText = 'Zobraziť zemepisnú šírku a dĺžku';
        var tooltipOptions = {
            direction: 'top',
            opacity: 1
        };
        var marker = L.marker(geo, { icon: icon })
            .bindPopup('Šírka: 48.16455<br>Dĺžka: 17.74351')
            .bindTooltip(tooltipText, tooltipOptions);
        marker.on('popupopen', () => {
            marker.unbindTooltip();
        });
        marker.on('popupclose', () => {
            marker.bindTooltip(tooltipText, tooltipOptions);
        });
        marker.addTo(map);
        $('#loading-map').css('display', 'none');
    });

    $(window).resize(() => {
        $('#uvod').animate({
            'height': $(window).outerHeight(),
            'min-height':
                $('#nav-normal').height() + $('.top-container').height() +
                $('#details').height()
        }, 350);
    });

    $(window).scroll(() => {
        if ($(this).scrollTop() == 0) {
            $('#fab-mobile-tablet').stop(true, false).fadeOut(500);
            $('#fab-desktop').stop(true, false).fadeOut(500);
        }
        else {
            $('#fab-mobile-tablet').fadeIn(500);
            $('#fab-desktop').fadeIn(500);
        }

        if ($(this).scrollTop() >= $('#uvod').height() - $('nav').height()) {
            $('#nav-normal').fadeIn(500);
            $('#nav-transparent').hide();
        }
        else {
            $('#nav-normal').stop(true, false).fadeOut(500);
            $('#nav-transparent').show();
        }
    });
</script>
<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Electrician",
        "name": "Firma Tibor Modroczky",
        "address": {
            "@type": "PostalAddress",
            "streetAddress": "Diakovská 712",
            "addressLocality": "Matúškovo",
            "postalCode": "92501",
            "addressCountry": "SK"
        },
        "geo": {
            "@type": "GeoCoordinates",
            "latitude": 40.761293,
            "longitude": -73.982294
        },
        "url": "{{url_for(request.endpoint, _external=True)}}",
        "telephone": ["+421905460506", "0317826228"],
        "email": "modroczkyt@gmail.com",
        "logo": "{{url_for('static', filename='logo_large.webp', _external=True)}}",
        "description": "Oprava TV, PC, notebookov, audio a video zariadení, predaj antivírusu Eset, inštalácia, údržba počítačov a notebookov, programovanie obvodov a iné."
    }
</script>
{% endblock %}